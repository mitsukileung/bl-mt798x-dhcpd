<!DOCTYPE HTML>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Flash Editor</title>
	<link rel="stylesheet" href="/style.css">
	<script src="/i18n.js"></script>
	<script src="/main.js"></script>
</head>

<body onload="appInit('flash')" data-page="flash">
	<div class="app">
		<aside id="sidebar" class="sidebar"></aside>
		<div class="main">
			<div id="m">
				<div class="card-head">
					<h1 data-i18n="flash.title">FLASH EDITOR</h1>
					<p id="hint" data-i18n-html="flash.hint">
						Read and write raw flash ranges using <strong>hex</strong>.
					</p>
				</div>
				<div class="card-main">
					<div id="flash_info" class="backup-info"></div>

					<div class="backup-form">
						<div class="form-row form-row-2">
							<div class="field">
								<label for="flash_target" data-i18n="flash.label.target">Target:</label>
								<select id="flash_target" class="field-control"></select>
							</div>
							<div class="field">
								<label for="flash_start" data-i18n="flash.label.start">Start:</label>
								<input id="flash_start" class="field-control" type="text" placeholder="0x0">
							</div>
						</div>
						<div class="form-row form-row-2">
							<div class="field">
								<label for="flash_end" data-i18n="flash.label.end">End (exclusive):</label>
								<input id="flash_end" class="field-control" type="text" placeholder="0x1000">
							</div>
							<div class="field">
								<label for="flash_range_hint" data-i18n="flash.label.size">Size:</label>
								<div id="flash_range_hint" class="backup-range-hint"></div>
							</div>
						</div>
						<div class="form-actions">
							<button type="button" class="button" onclick="flashRead()"
								data-i18n="flash.action.read">Read</button>
							<button type="button" class="button" onclick="flashWrite()"
								data-i18n="flash.action.write">Write</button>
							<button type="button" class="button button-warn" onclick="flashFormatData()"
								data-i18n="flash.action.format">Format</button>
						</div>
					</div>

					<div class="hex-tools">
						<div class="field">
							<label for="flash_jump" data-i18n="flash.label.jump">Jump to offset:</label>
							<div class="hex-jump-row">
								<input id="flash_jump" class="field-control" type="text" placeholder="0x0 / 1024">
								<button type="button" class="button" onclick="flashJumpToOffset()"
									data-i18n="flash.action.jump">Jump</button>
							</div>
						</div>
					</div>

					<div class="field">
						<label for="flash_data" data-i18n="flash.label.data">Hex data:</label>
						<div class="hex-editor">
							<div class="hex-header">
								<div class="hex-offset-title" data-i18n="flash.label.offset">Offset</div>
								<div class="hex-x-title">00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F</div>
								<div class="hex-ascii-title" data-i18n="flash.label.ascii">ASCII</div>
							</div>
							<div class="hex-body">
								<pre id="flash_offset" class="hex-offset"></pre>
								<textarea id="flash_data" class="hex-input" rows="10"
									placeholder="00 11 22 33"></textarea>
								<pre id="flash_ascii" class="hex-ascii"></pre>
							</div>
						</div>
					</div>

					<div class="backup-form" style="margin-top: 16px;">
						<div class="form-row form-row-2">
							<div class="field">
								<label for="flash_backup" data-i18n="flash.label.restore">Restore file:</label>
								<input id="flash_backup" class="field-control" type="file" accept=".bin">
							</div>
							<div class="field">
								<label for="flash_restore_info" data-i18n="flash.label.detected">Detected:</label>
								<div id="flash_restore_info" class="backup-range-hint"></div>
							</div>
						</div>
						<div class="form-row">
							<div id="flash_restore_bar" class="bar" style="display: none;"></div>
						</div>
						<div class="form-actions">
							<button type="button" class="button" onclick="flashRestore()"
								data-i18n="flash.action.restore">Restore</button>
						</div>
					</div>

					<div id="flash_status" class="flash-status" style="display: none;">
						<div id="flash_spinner" class="spinner" style="display: none;"></div>
						<div id="flash_status_text"></div>
					</div>
				</div>
				<div class="card-foot">
					<div class="i w">
						<strong data-i18n="common.warnings">WARNINGS</strong>
						<ul>
							<li data-i18n="flash.warn.1">writing wrong data may brick the device</li>
							<li data-i18n="flash.warn.2">always double-check target and range</li>
							<li data-i18n="flash.warn.3">do not power off during write/restore</li>
							<li data-i18n="flash.warn.4">max size in once read/write is 4KiB</li>
						</ul>
					</div>
				</div>
			</div>
			<div id="version"></div>
		</div>
	</div>
</body>

</html>